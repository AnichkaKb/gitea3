"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTargets = exports.isWebpack5 = void 0;
var browserslist_1 = __importDefault(require("browserslist"));
var lightningcss_1 = require("lightningcss");
var isWebpack5 = function (compilation) { return 'processAssets' in compilation.hooks; };
exports.isWebpack5 = isWebpack5;
var targetsCache = {};
var getTargets = function (opts) {
    var cache = targetsCache[opts.key];
    if (cache) {
        return cache;
    }
    var cwd = process.cwd();
    var result = (0, browserslist_1.default)(opts.default, {
        path: cwd,
        env: process.env.NODE_ENV || 'production',
    });
    targetsCache[opts.key] = (0, lightningcss_1.browserslistToTargets)(result);
    return (targetsCache[opts.key] = (0, lightningcss_1.browserslistToTargets)(result));
};
exports.getTargets = getTargets;
